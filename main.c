/*
 * main.c
 *
 * Created: 09.06.2015 18:51:42
 *  Author: Администратор
 */ 

#include "main.h"

//---------------------------------------------------------------------------------------
#define ADC_VREF_TYPE 0x00
//****************************************************************************************
// ADC interrupt service routine
//****************************************************************************************
ISR (ADC_vect)
{
	//---------------------------------------------------------------------------------------
	// Read the AD conversion result
	adc_data=ADCW;
	if (adc_data<50)
	{
		//---------------------------------------------------------------------------------------
		adc_data=50;
		//---------------------------------------------------------------------------------------
	};
	_delay_us(10);
	// Start the AD conversion
	ADCSRA|=0x40;
	//---------------------------------------------------------------------------------------
	return;
};

int main(void)
{
	//---------------------------------------------------------------------------------------
	init_periphery ();
	//---------------------------------------------------------------------------------------
	//Global enable interrupts
	sei();
	//---------------------------------------------------------------------------------------
    while(1)
    {
        //TODO:: Please write your application code 
		//---------------------------------------------------------------------------------------
		_delay_ms(50);
		//---------------------------------------------------------------------------------------
		if (adc_data>=THRESHOLD_H)
		{
			//---------------------------------------------------------------------------------------
			ON_50V
			//---------------------------------------------------------------------------------------
		} 
		else if (adc_data<=THRESHOLD_L)
		{
			//---------------------------------------------------------------------------------------
			ON_25V
			//---------------------------------------------------------------------------------------
		}
		else
		{
			//---------------------------------------------------------------------------------------
			
			//---------------------------------------------------------------------------------------
		};
		//---------------------------------------------------------------------------------------
    };
};